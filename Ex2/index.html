<!DOCTYPE html>

<!-- ====================== H T M L     S T A R T ========================= -->

<html>

<!-- =========================== H E A D ================================== -->

<head>

<!-- =================== C A N V A S    C O L O U R ======================= -->
  <style>
    body{
      margin:0;
      padding:0;
      position: relative;
    }

    canvas{
      background:#303030;
      margin:0;
      padding:0;
    }

    #switch{
       width: 500px;
       height: auto;
       position: absolute;
       top: 400px;
    }

    #switch img {
        margin-left: auto;
        margin-right: auto;
        display: block;
        width: 20%;
        height: auto;
    }


  </style>

  <!-- ========================= S C R I P T ================================ -->

    <script>

      // L O A D    C A N V A S
      window.onload = function (){
          let canvas = document.getElementById ("canvasSize");
          let lightSwitchImage = document.getElementById("button");
          let lightSwitch = canvas.getContext("2d");
          let lightBulb = canvas.getContext ('2d');

      // E L L I P S E     V A R I A B L E S
          let lightX = canvas.width/2;
          let lightY = canvas.height/2;
          let lightRadius = 100;
          let startAngle = 0;
          let endAngle = Math.PI * 2;


      // S W I T C H     S T U F F
          lightSwitch.isPressed = true;

      // E V E N T     L I S T E N E R
          lightSwitchImage.addEventListener("mousedown",function(event){
            lightSwitch.isPressed = !lightSwitch.isPressed;
            console.log("canvas is clicked");
            console.log("light switch status: "+lightSwitch.isPressed)
            lightSwitch.switchClick(event);
          });

//STILL NEED TO FIX ELLIPSE COLOUR CHANGE!! //

      // I N I T I A L      E L L I P S E     C O L O U R S
          lightBulb.fillStyle = "rgba(255,255,255,1.0)";
          lightBulb.strokeStyle = "rgba(255,0,0,1.0)";

      // D R A W     E L L I P S E
      requestAnimationFrame(run);

      function run() {
            lightBulb.clearRect (0,0, lightBulb.width,lightBulb.height);
            lightBulb.beginPath();
            lightBulb.arc(lightX, lightY, lightRadius, startAngle, endAngle, true);
            lightBulb.fill();
            lightBulb.stroke();
            lightBulb.closePath();
            requestAnimationFrame(run);
}
      // C L I C K I N G      T H E     S W I T C H
          lightSwitch.switchClick = function(){
            if(Math.sqrt(Math.pow((event.clientX-lightSwitchImage.x),2)+Math.pow((event.clientY-lightSwitchImage.y),2))<lightSwitchImage.width) {

          }
            if (lightSwitch.isPressed === true) {
              document.getElementById("button").src = "assets/on.png";
              lightBulb.fillStyle = "rgba(255,255,255,1.0)";
            }
            if(lightSwitch.isPressed === false) {
              document.getElementById("button").src = "assets/off.png";
              lightBulb.fillStyle = "rgba(0,0,0,1.0)";
            }
        }
    }



    </script>

</head>

<!-- =========================== B O D Y ================================== -->

<body>

<!-- ========================= I M A G E S ================================ -->

  <!-- light switch -->
    <div id="switch" ><img id="button" src="assets/on.png"></div>



<!-- ========================== C A N V A S =============================== -->

  <canvas id= "canvasSize" width="500" height="500">
  </canvas>


</body>

</html>

<!-- ===================== I M A G E    C R E D I T S =====================

1) Light Switch
      On: https://publicdomainvectors.org/en/free-clipart/Switch-on/50394.html
      Off:  https://publicdomainvectors.org/en/free-clipart/White-switch-off/50395.html
